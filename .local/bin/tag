#!/bin/bash
# 
# The script must be used on DWM with the "ewmhtags" patch applied
# it also requires "xdo" installed
# it's a workaround for the case you can't apply the patch "nextprev"  
#
#

desk=$(xprop -root | grep "_NET_CURRENT_DESKTOP(CARDINAL)" | awk '{print $3}')

next() {
	xdo key_press -k 133; xdo key_press -k `expr $desk + 11`; xdo key_release -k 133;  xdo key_release -k `expr $desk + 11`;
}

prev() {
	xdo key_press -k 133; xdo key_press -k `expr $desk + 9`; xdo key_release -k 133;  xdo key_release -k `expr $desk + 9`;
}


if [ -z "$1" ] || [ $1 != "next" -a $1 != "prev" ] 
then
	echo "The only accepted entries are 'prev' or 'next'"

elif [ $desk == 0 ] # this line prevent xdotool to select all tags
then
	next

elif [ $desk == 6 ] # change this line to 8 if you use 9 tags
then
	prev

elif [ $1 == "next" ]
then
	$1

else

	$1

fi